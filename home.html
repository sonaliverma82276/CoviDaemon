<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Store HTML form submissions in Google Sheets">

  <link rel="stylesheet" href="./style.css">
  <script src="https://unpkg.com/prefixfree@1.0.0/prefixfree.min.js"></script>

  <script src="https://wzrd.in/standalone/formdata-polyfill@latest"></script>
  <script src="https://wzrd.in/standalone/promise-polyfill@latest"></script>
  <script src="https://wzrd.in/standalone/whatwg-fetch@latest"></script>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
  integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">

  <script src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
</head>
<body>
    <div class="main">
        <div class="heading">
          <img src="./logo.jpg"/>
           <p class="top">CoviDaemon</p> 
      </div>
      <div class="heading des">
        <p>Mailer Daemon extends its hand to help the community by voicing their needs during this pandemic under the hashtag #CoviDaemon. We request the individuals (related to the patient in any form) to send us their details in the format specified below in order to make the required resources feasible and faster to deliver.</p>
        <hr>
   </div>
      <div class="row " style="margin-top: 10px; margin-left: 5px;">
        <input type="text" id="myInput" class="searchInp" onkeyup="myFunction()" placeholder="Search by Name/Location/Requirement">
      <button class="searchbtn" onclick="myFunction()"><i class="fa fa-search"></i></button>
      </div>
        <div style="overflow-x:auto; margin-bottom: 30px;">
            <table id="myTable" style="width: 100%;">
              <tr class="header">
                <th >Name</th>
                <th>Age</th>
                <th>Oxygen Level</th>
                <th >City</th>
                <th >State</th>
                <th >Name (Attendent)</th>
              <th >Contact</th>
              <th >Requirement</th>
              </tr>
                  <tbody id="data"></tbody>
            </table>
        </div>
      </div>
        <footer>
          <div class="container-fluid padding" id="contact">
            <div class="row padding text-center">
              <div class="col-12 social">
                <p>Contact Us</p>
              </div>
              <div class="col-12 social padding">
                <a href="https://www.facebook.com/MDiitism/?__xts__[0]=68.ARCHcGPhUIaM6dOH49sbEiT-B"><i class="fab fa-facebook"></i></a>
                <a href="https://www.instagram.com/md_iit_dhanbad/"><i class="fab fa-instagram"></i></a>
                      <a href="https://www.linkedin.com/company/mailer-daemon/?originalSubdomain=in"> <i class="fab fa-linkedin"></i></a>
              </div>
            </div>
          </div>
          </footer>
</body>

  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
  integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
  crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
  integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
  crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
  integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
  crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script>
  function myFunction() {
    var filter;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    var rows = document.querySelector("#data").rows;
    
    for (var i = 0; i < rows.length; i++) {
        var firstCol = rows[i].cells[0].textContent.toUpperCase();
        var secondCol = rows[i].cells[3].textContent.toUpperCase();
        var thirdCol = rows[i].cells[4].textContent.toUpperCase();
        var fourthCol = rows[i].cells[7].textContent.toUpperCase();
        var fiveCol = rows[i].cells[6].textContent.toUpperCase();
        if (firstCol.indexOf(filter) > -1 || secondCol.indexOf(filter) > -1 || thirdCol.indexOf(filter) > -1 || fourthCol.indexOf(filter) > -1 || fiveCol.indexOf(filter) > -1   ) {
            rows[i].style.display = "";
        } else {
            rows[i].style.display = "none";
        }      
    }
  }

  </script>

<script>
    fetch("https://spreadsheets.google.com/feeds/list/18W_blT2tyWDp1xRqClAKhMUpuSydhh99idB5Dm_3GrQ/1/public/values?alt=json")
       .then(res => res.json())
       .then(data => {
          var temp = "";
          data = data.feed.entry;
          data.forEach(d => {
            temp+= "<tr>";
            temp+= "<td>"+d.gsx$nameofpatient.$t+"</td>";
            temp+= "<td>"+d.gsx$ageofpatient.$t+"</td>";
            temp+= "<td>"+d.gsx$oxygenlevel.$t+"</td>";
            temp+= "<td>"+d.gsx$city.$t+"</td>";
            temp+= "<td>"+d.gsx$state.$t+"</td>";
            temp+= "<td>"+d.gsx$nameofattendant.$t+"</td>";
            temp+= "<td class='number'>"+d.gsx$contactnumberofattendant.$t+"<a href='https://wa.me/+91"+d.gsx$contactnumberofattendant.$t+"' target='_blank' style='margin-left:5px; color:green;'><i class='fa fa-whatsapp' style='font-size:1rem;'></i></a></td>";
            temp+= "<td>"+d.gsx$requirement.$t+"</td></tr>";
          })
          document.getElementById("data").innerHTML=temp;
       })
  </script>
</body>
</html>
<!-- https://script.google.com/macros/s/AKfycbwWY6J4bXmdDq5KGIbEODTSAEcZuvgX55p9fz-vbfKYfjOnZIq_04Cdbw-IWNCEtGRd/exec -->
